<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      lang="en" data-namespace-typo3-fluid="true">
<head>
    <meta charset="utf-8">
    <title>Partial: Menus/Main/Default</title>
</head>
<body>
<f:section name="Default">

    <f:debug>{_all}</f:debug>

    <f:variable name="navbarExpand" value="navbar-expand-{settings.sitekit.menus.mainMenu.collapsing}"/>

    <div id="main-navigation" class="bg-primary shadow-sm sticky-top">
        <div class="container">
            <nav class="navbar {navbarExpand} bg-body-primary text sticky-top" data-bs-theme="dark">
                <div class="container-fluid g-0">
                    <f:render partial="Menus/Main/Brand" section="Default" arguments="{_all}"/>
                    <f:render partial="Menus/Main/Toggler" section="Default" arguments="{_all}"/>

                    <div class="collapse navbar-collapse" id="navbarMain">
                        <f:if condition="{mainMenu}">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                <f:for each="{mainMenu}" as="item">
                                    <f:if condition="{item.hasSubpages}">
                                        <f:then>
                                            <f:render section="NavItemDropdown" arguments="{item: item}"/>
                                        </f:then>
                                        <f:else>
                                            <f:render section="NavItem" arguments="{item: item}"/>
                                        </f:else>
                                    </f:if>
                                </f:for>
                            </ul>
                        </f:if>
                        <f:render partial="Menus/Main/Search" section="Default" arguments="{item: item}"/>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</f:section>


<f:section name="NavItem">
    <f:variable name="targetBlankLabel" value=""/>
    <f:if condition="{item.target} == '_blank'">
        <f:variable name="targetBlankLabel" value=" ({f:translate(key: 'openInNewTab', extensionName: 'OtSitekitbase', default: 'open in new tab')})"/>
    </f:if>

    <li class="nav-item">
        <a class="nav-link{f:if(condition: '{item.active} == 1', then: ' active')}"
           href="{item.link}"
           aria-label="{item.title}{targetBlankLabel}"
           {f:if(condition: '{item.target}', then: ' target="{item.target}"')}
        {f:if(condition: '{item.current}', then: ' aria-current="page"')}>{item.title}
        </a>
    </li>
</f:section>


<f:section name="NavItemDropdown">
    <f:variable name="targetBlankLabel" value=""/>
    <f:if condition="{item.target} == '_blank'">
        <f:variable name="targetBlankLabel" value=" ({f:translate(key: 'openInNewTab', extensionName: 'OtSitekitbase', default: 'open in new tab')})"/>
    </f:if>

    <li class="nav-item dropdown">
        <a class="nav-link{f:if(condition: '{item.active} == 1', then: ' active')} dropdown-toggle"
           href="#"
           role="button"
           data-bs-toggle="dropdown"
           aria-expanded="false"
           aria-label="{item.title}{targetBlankLabel}"
           {f:if(condition: '{item.target}', then: ' target="{item.target}"')}
        {f:if(condition: '{item.current}', then: ' aria-current="page"')}>{item.title}
        </a>
        <f:render section="NavSubItems" arguments="{item: item}"/>
    </li>
</f:section>


<f:section name="NavSubItems">
    <ul class="dropdown-menu shadow-sm">
        <f:for each="{item.children}" as="subitem">

            <f:variable name="targetBlankLabel" value=""/>
            <f:if condition="{subitem.target} == '_blank'">
                <f:variable name="targetBlankLabel" value=" ({f:translate(key: 'openInNewTab', extensionName: 'OtSitekitbase', default: 'open in new tab')})"/>
            </f:if>

            <f:if condition="{subitem.spacer} == 1">
                <f:then>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                </f:then>
                <f:else>
                    <li>
                        <a class="dropdown-item{f:if(condition: '{subitem.active} == 1', then: ' active')}"
                           href="{subitem.link}"
                           aria-label="{item.title}{targetBlankLabel}"
                           {f:if(condition: '{subitem.target}', then: ' target="{subitem.target}"')}
                        {f:if(condition: '{subitem.current}', then: ' aria-current="page"')}>{subitem.title}
                        </a>
                    </li>
                </f:else>
            </f:if>
        </f:for>
    </ul>
</f:section>
</body>
</html>
